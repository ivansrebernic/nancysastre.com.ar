---
import PublicFigureCard from './PublicFigureCard.astro';
import drlarosaProfile from '../images/drlarosa-profile.jpg';
import drlarosaConference from '../images/drlarosa.png';
import team2 from '../images/team/2.jpg';
import team3 from '../images/team/3.jpg';

const publicFigures = [
  {
    image: drlarosaProfile,
    name: 'Dr. La Rosa',
    title: 'Médico y Divulgador Científico',
    description: 'Reconocido profesional de la salud, miembro de Mensa y popular YouTuber con más de 6 millones de suscriptores. Conferencista en Alumbra, el evento global de emprendedores Fuxion, donde compartió su visión sobre salud preventiva y el impacto de la nutrición funcional.',
    credentials: ['Miembro de Mensa', 'YouTuber de Salud', 'Conferencista Internacional'],
    socialLinks: {
      youtube: 'https://www.youtube.com/c/DRLAROSA'
    },
    conferenceImage: drlarosaConference
  },
  {
    image: team2,
    name: 'Dra. María González',
    title: 'Nutricionista Deportiva',
    description: 'Especialista en nutrición deportiva con más de 15 años de experiencia. Ha trabajado con atletas olímpicos y recomienda los productos Fuxion para optimizar el rendimiento y la recuperación muscular.',
    credentials: ['PhD en Nutrición', 'Certificación ISSN', 'Autora de 3 libros'],
    socialLinks: {
      instagram: 'https://instagram.com'
    }
  },
  {
    image: team3,
    name: 'Dr. Carlos Mendoza',
    title: 'Endocrinólogo',
    description: 'Experto en metabolismo y control de peso, con más de 20 años de trayectoria. Recomienda la línea Control de Fuxion como complemento efectivo en programas de pérdida de peso saludable.',
    credentials: ['Jefe de Endocrinología', 'Investigador Clínico', '200+ publicaciones'],
    socialLinks: {
      web: 'https://example.com'
    }
  }
];
---

<section id="public-figures-section" class="py-12 md:py-10 md:py-12 relative overflow-hidden bg-gradient-to-br from-gray-50 to-white">
  <!-- Background Pattern -->
  <div class="absolute inset-0">
    <div class="absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"></div>
    <div class="absolute bottom-0 left-0 w-96 h-96 bg-blue-400/5 rounded-full blur-3xl transform -translate-x-1/2 translate-y-1/2"></div>
  </div>

  <div class="container-narrow relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-12">
      <p class="text-primary text-sm uppercase tracking-widest mb-3 font-scandia-medium animate-slide-down">CREDIBILIDAD Y CONFIANZA</p>
      <h3 class="text-3xl md:text-4xl font-scandia-medium mb-4 text-gray-900 animate-slide-up">RESPALDADO POR EXPERTOS</h3>
      <p class="text-gray-600 max-w-2xl mx-auto text-lg animate-fade-in">
        Profesionales de la salud de renombre internacional confían y recomiendan los productos Fuxion
      </p>
    </div>

    <!-- Public Figures Grid/Slider -->
    <div class="relative">
      <!-- Navigation -->
      <div class="navigationslide absolute top-1/2 transform -translate-y-1/2 w-full flex justify-between px-4 z-10 pointer-events-none">
        <button class="prevslide pointer-events-auto bg-white shadow-lg hover:shadow-xl transition-all duration-300 rounded-full p-3 border border-gray-200">
          <span class="material-icons-outlined text-primary">
            arrow_back_ios
          </span>
        </button>
        <button class="nextslide pointer-events-auto bg-white shadow-lg hover:shadow-xl transition-all duration-300 rounded-full p-3 border border-gray-200">
          <span class="material-icons-outlined text-primary">
            arrow_forward_ios
          </span>
        </button>
      </div>

      <!-- Figures Slider -->
      <div id="figures-slider" class="overflow-hidden">
        <div class="figures-track flex transition-transform duration-500 ease-in-out gap-6">
          {publicFigures.map((figure, index) => (
            <div class="figure-slide w-full md:w-1/2 lg:w-1/3 flex-shrink-0">
              <div class="stagger-item" style={`animation-delay: ${index * 0.1}s`}>
                <PublicFigureCard {...figure} />
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>

    <!-- Trust Badge -->
    <div class="mt-12 text-center animate-fade-in">
      <div class="inline-flex items-center gap-3 bg-primary/10 px-6 py-3 rounded-full">
        <span class="material-icons text-primary">verified</span>
        <span class="text-primary font-scandia-medium">Profesionales Verificados</span>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes slide-down {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .animate-slide-down {
    animation: slide-down 0.6s ease-out forwards;
  }

  .animate-slide-up {
    animation: slide-up 0.6s ease-out forwards;
  }

  .animate-fade-in {
    animation: fade-in 0.8s ease-out forwards;
    animation-delay: 0.2s;
  }

  .stagger-item {
    opacity: 0;
    animation: slide-up 0.6s ease-out forwards;
  }

  .navigationslide button {
    transition: all 0.3s ease;
  }

  .navigationslide button:hover {
    transform: scale(1.1);
    background-color: var(--color-primary);
    color: white;
  }

  .navigationslide button:hover .material-icons-outlined {
    color: white;
  }

  @media (max-width: 768px) {
    .figures-track {
      gap: 1rem;
    }
    
    .figure-slide {
      width: 100% !important;
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    .figure-slide {
      width: 50% !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const slider = document.querySelector('.figures-track') as HTMLElement;
    const slides = document.querySelectorAll('.figure-slide');
    const prevBtn = document.querySelector('.prevslide');
    const nextBtn = document.querySelector('.nextslide');
    
    let currentSlide = 0;
    const slidesToShow = window.innerWidth >= 1024 ? 3 : window.innerWidth >= 768 ? 2 : 1;
    const totalSlides = Math.ceil(slides.length / slidesToShow);

    function updateSlider() {
      const slideWidth = 100 / slidesToShow;
      const offset = -currentSlide * 100;
      if (slider) {
        slider.style.transform = `translateX(${offset}%)`;
      }
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      updateSlider();
    }

    function prevSlide() {
      currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
      updateSlider();
    }

    nextBtn?.addEventListener('click', nextSlide);
    prevBtn?.addEventListener('click', prevSlide);

    // Auto-play slider
    setInterval(nextSlide, 7000);

    // Update on resize
    window.addEventListener('resize', () => {
      currentSlide = 0;
      updateSlider();
    });
  });
</script>